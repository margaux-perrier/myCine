<app-movie-page *ngIf="(currentPage$ | async ) === '/movies' ||  (currentPage$ | async ) === ''" ></app-movie-page>
<app-home-page *ngIf="(currentPage$ | async ) === '/'"></app-home-page>
<app-library-page *ngIf="(currentPage$ | async ) === '/library' ||  (currentPage$ | async ) === '' "></app-library-page>

<div class="overlay" *ngIf="currentItem$ | async as item">
    <div class="details-container" >
            <div class="content-container">

                <div class="tag-container">
                    <div class="item_classification"> 
                        <div class="tag--public" *ngIf="item.classification === 'tous publics' "> {{item.classification | titlecase }} </div>
                        <div class="icon-forbidden" *ngIf="item.classification !== 'tous publics'">{{item.classification}}</div>
                    </div>
                    <div class="item_time">{{item.duration | durationPipe}}</div>
                    <app-tag *ngFor="let genre of item.genres" [genre]="genre"></app-tag>
                </div>
                
                <h1 class="item_title">{{item.name | uppercase}}</h1>
                <h2 class="item_subtitle">{{item.producer?.firstname | titlecase}} {{ item.producer?.lastname | titlecase }} <span>({{item.year}})</span></h2>
                
                <div class="buttons-container">
                    <fa-icon 
                        (click)='handleClick($event)' 
                        id="favorisIdList" 
                        [ngClass]="{'icon fa-heart fa-lg' : true, 'fas heart--active': (favoriteValue$ | async), 'far' : !(favoriteValue$ | async)}">
                    </fa-icon> 
                    <fa-icon 
                        (click)='handleClick($event)'
                        id="whishIdList" 
                        [ngClass]="{'icon far fa-bookmark fa-lg' : true, 'fas': (whishValue$ | async), 'far' : !(whishValue$ | async)}">
                    </fa-icon> 
                    <fa-icon 
                        (click)='handleClick($event)' 
                        id="watchedIdList" 
                        [ngClass]="{'icon far fa-lg' : true, 'fas fa-eye eye--active': (watchedValue$ | async), 'far fa-eye-slash' : !(watchedValue$ | async)}">
                    </fa-icon> 
                    <div class="rating-container--close" (click)="handleRating()">
                        <fa-icon [ngClass]="{ 'icon far fa-star fa-lg' : true, 'star--open fas' : isRatingOpen}"></fa-icon>
                        <div class="rating" *ngIf="!isRatingOpen">{{item.rating}}</div>
                    </div>
                    <div *ngIf="isRatingOpen" class="rating-container--open">
                        <p-rating [cancel]="false"></p-rating>
                    </div>
                </div>

                <p class="description-section">{{item.description}}</p>
        
                <ul class="actors">
                    <li class="actor" *ngFor="let actor of item.actors">{{actor.firstname | titlecase}} {{actor.lastname | titlecase}}</li>
                </ul>
            </div>
            
            <button (click)="handleClose()" class="close-button">x</button>
            <img src='../../../assets/images/{{item.avatar}}' alt='visuel de {{item.name}}'/> 
        </div>
</div>
